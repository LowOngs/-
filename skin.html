<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>[##_title_##]</title>
  <link rel="stylesheet" href="./style.css" />
</head>
<body class="[##_var_sidebartype_##]">

  <a class="skip" href="#content">본문으로 건너뛰기</a>
  <a class="skip" href="#sidebar">사이드바로 건너뛰기</a>

  <header class="site-header" role="banner" aria-label="상단 헤더">
    <button class="hamburger" type="button" aria-controls="sidebar" aria-expanded="false">
      <span class="sr">사이드 메뉴 열기</span>☰
    </button>

    <a class="brand" href="[##_blog_link_##]" aria-label="홈으로 이동">
      <span class="brand__logo" aria-hidden="true"></span>
      <span class="brand__text">
        <span class="brand__title">[##_title_##]</span><br/>
        <span class="brand__desc">[##_desc_##]</span>
      </span>
    </a>

    <nav class="gnb [##_var_topnav_##]" aria-label="상단 메뉴">
      [##_blog_menu_##]
    </nav>

    <div class="header-actions">
      <a class="btn" href="[##_blog_link_##]">홈</a>
      <a class="btn" href="https://www.tistory.com/signup" target="_blank" rel="noopener">가입</a>
      [##_if_admin_##]
        <a class="btn" href="[##_owner_url_##]">관리</a>
      [##_endif_##]
    </div>
  </header>

  <main class="layout" role="main">
    <section id="content" class="layout__main" tabindex="-1">
      [##_article_rep_##]
        <article class="post [##_article_rep_class_##]">
          <h1 class="post__title">[##_article_title_##]</h1>
          <div class="post__meta">[##_date_##] · [##_category_##]</div>
          <div class="post__body">[##_article_rep_desc_##]</div>
          <div class="post__tags">[##_taglog_##]</div>
        </article>
      [##_article_rep_##]
    </section>

    <aside id="sidebar" class="layout__side" aria-label="보조 사이드바">
      <div class="side__block">
        <strong class="side__title">공지사항</strong>
        <div class="notice-marquee" aria-live="polite">[##_notice_##]</div>
      </div>

      <hr/>

      <div class="side__block">
        <strong class="side__title">카테고리</strong>
        <div class="category js-accordion-target">[##_category_##]</div>
      </div>

      <hr/>

      <div class="side__block">
        <span class="adlabel" aria-label="광고 표기">Ads Google</span>
        <div class="adslot" role="region" aria-label="광고 영역 상단">
          <!-- Ad #1 -->
        </div>
      </div>

      <div class="side__block">
        <strong class="side__title">특가 정보 안내</strong>
        <p class="muted">평시 비활성, 필요 시 오픈됩니다.</p>
      </div>

      <div class="side__block deals is-collapsed">
        <div class="deal-panel">특가 안내창 #1 (비활성 시 접힘)</div>
        <div class="deal-panel">특가 안내창 #2 (비활성 시 접힘)</div>
        <div class="deal-panel">특가 안내창 #3 (비활성 시 접힘)</div>
      </div>

      <hr/>

      <!-- ★ 광고 #2: 특가 안내 끝 + 구분선 다음, 메뉴 위 -->
      <div class="side__block">
        <span class="adlabel" aria-label="광고 표기">Ads Google</span>
        <div class="adslot" role="region" aria-label="광고 영역 중간">
          <!-- Ad #2 -->
        </div>
      </div>

      <div class="side__block">
        <strong class="side__title">메뉴</strong>
        <div class="menu">[##_blog_menu_##]</div>
      </div>
    </aside>
  </main>

  <footer class="site-footer" role="contentinfo">
    <div class="partners">
      <span class="partner">Coupang</span>
      <span class="partner">Naver</span>
      <span class="partner">11st</span>
      <span class="partner">Musinsa</span>
      <span class="partner">Amazon</span>
      <span class="partner">eBay</span>
      <span class="partner">Ali Exp.</span>
      <span class="partner">OTTO</span>
      <span class="partner">Allegro</span>
      <span class="partner">Shopee</span>
      <span class="partner">Lazada</span>
    </div>
    <p class="disclaimer">제휴링크는 모두 무료로 제공되며, 구매 시 수수료를 받을 수 있습니다.</p>
    <div class="copyright">
      <span>© 2025 옹달샘 지식 아카이브</span>
      <span class="sep">|</span>
      <span>Kakao 정책 문구</span>
    </div>
  </footer>

  
  <script>
    (function(){
      var body = document.body;
      var isDrawer = body.classList.contains('drawer'); // PC1
      var hamburger = document.querySelector('.hamburger');
      var sidebar = document.getElementById('sidebar');

      // PC1: 기본 펼침 + 상태 기억
      if (isDrawer) {
        var saved = localStorage.getItem('pc1SidebarOpen');
        if (saved === null) {
          body.classList.add('drawer-open'); // 기본 활성화
        } else {
          if (saved === 'true') body.classList.add('drawer-open');
          else body.classList.remove('drawer-open');
        }
        if (hamburger) {
          var syncBtn = function(){
            var open = body.classList.contains('drawer-open');
            hamburger.setAttribute('aria-expanded', open ? 'true' : 'false');
          };
          hamburger.addEventListener('click', function(){
            body.classList.toggle('drawer-open');
            var open = body.classList.contains('drawer-open');
            localStorage.setItem('pc1SidebarOpen', open ? 'true' : 'false');
            syncBtn();
          });
          syncBtn();
        }
      }

      // PC2: 카테고리 아코디언 + 외부클릭 즉시닫힘 + 2초 자동닫힘 타이머
      var accRoot = document.querySelector('.js-accordion-target');
      var autoTimer = null;
      var currentOpen = null;

      function clearAutoTimer(){
        if (autoTimer){ clearTimeout(autoTimer); autoTimer = null; }
      }
      function startAutoTimer(sub, trigger){
        clearAutoTimer();
        autoTimer = setTimeout(function(){
          if (sub && !sub.contains(document.activeElement)){
            sub.hidden = true;
            if (trigger) trigger.setAttribute('aria-expanded','false');
            currentOpen = null;
          }
        }, 2000); // 2초 후 자동 닫힘
      }
      function closeSiblingsKeep(li){
        var siblings = li.parentElement.children;
        for (var i=0; i<siblings.length; i++){
          var s = siblings[i];
          if (s !== li){
            var su = s.querySelector(':scope > ul');
            if (su){ su.hidden = true; }
            var sa = s.querySelector(':scope > a[aria-expanded]');
            if (sa){ sa.setAttribute('aria-expanded','false'); }
          }
        }
      }
      function closeAll(){
        if (!accRoot) return;
        clearAutoTimer();
        Array.prototype.forEach.call(accRoot.querySelectorAll('ul ul'), function(ul){
          ul.hidden = true;
        });
        Array.prototype.forEach.call(accRoot.querySelectorAll('li > a[aria-expanded]'), function(a){
          a.setAttribute('aria-expanded','false');
        });
        currentOpen = null;
      }

      if (accRoot) {
        accRoot.classList.add('accordionized');
        // 초기: 모두 접기
        Array.prototype.forEach.call(accRoot.querySelectorAll('ul ul'), function(ul){
          ul.hidden = true;
        });
        // 접근성 속성
        Array.prototype.forEach.call(accRoot.querySelectorAll('li > a'), function(a){
          var hasSub = !!a.parentElement.querySelector(':scope > ul');
          if (hasSub) a.setAttribute('aria-expanded', 'false');
        });

        // 클릭 토글
        accRoot.addEventListener('click', function(e){
          var a = e.target.closest('a');
          if (!a) return;
          var li = a.parentElement;
          var sub = li && li.querySelector(':scope > ul');
          if (!sub) return; // 하위 목록 없으면 기본 동작
          e.preventDefault();

          var willOpen = sub.hidden;
          if (willOpen){
            closeSiblingsKeep(li);
            sub.hidden = false;
            a.setAttribute('aria-expanded','true');
            currentOpen = {sub: sub, trigger: a};

            // 자동닫힘 타이머 시작
            startAutoTimer(sub, a);

            // 유저가 서브메뉴에 진입하면 타이머 해제 / 벗어나면 재시작
            sub.addEventListener('mouseenter', clearAutoTimer, {once:false});
            sub.addEventListener('mouseleave', function(){ startAutoTimer(sub, a); }, {once:false});
            sub.addEventListener('focusin', clearAutoTimer, {once:false});
            sub.addEventListener('focusout', function(ev){
              // 포커스가 서브 전체를 벗어날 때만 재시작
              if (!sub.contains(ev.relatedTarget)) startAutoTimer(sub, a);
            }, {once:false});
          } else {
            sub.hidden = true;
            a.setAttribute('aria-expanded','false');
            currentOpen = null;
            clearAutoTimer();
          }
        });

        // 외부 클릭 시 즉시 닫힘
        document.addEventListener('click', function(e){
          if (!accRoot.contains(e.target)){
            closeAll();
          }
        });
      }
    })();
  </script>

</body>
</html>
