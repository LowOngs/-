<!-- Saved Posts (page번호만) · v1 -->
<style>
  .saved-box{font:14px/1.45 system-ui, -apple-system, Segoe UI, Arial; color:#111}
  .saved-row{display:flex;align-items:center;gap:8px;margin:10px 0}
  .saved-input{flex:1 1 auto;padding:8px 10px;border:1px solid #e5e7eb;border-radius:10px}
  .saved-btn{padding:8px 12px;border:0;border-radius:10px;background:#2563eb;color:#fff;font-weight:700;cursor:pointer}
  .saved-btn:disabled{opacity:.6;cursor:not-allowed}
  .saved-tip{margin:6px 0 10px;color:#6b7280;font-size:12px}
  .saved-list{display:flex;flex-direction:column;gap:6px;margin:8px 0}
  .saved-item{display:flex;align-items:center;justify-content:space-between;gap:8px;border:1px dashed #e5e7eb;border-radius:10px;padding:8px 10px}
  .saved-item .txt{font-weight:600}
  .saved-x{appearance:none;border:0;background:#f3f4f6;border-radius:8px;padding:4px 8px;cursor:pointer}
  .saved-x:hover{background:#e5e7eb}
  .saved-actions{display:flex;justify-content:flex-end;margin-top:8px}
  .saved-clear{appearance:none;border:0;background:#e5e7eb;border-radius:10px;padding:8px 12px;cursor:pointer}
</style>

<div class="saved-box" id="savedBox">
  <div class="saved-row">
    <input id="savedInput" class="saved-input" type="text" placeholder="페이지 입력" inputmode="numeric" />
    <button id="savedAdd" class="saved-btn">저장</button>
  </div>
  <div class="saved-tip">page 번호만 입력 (예: <b>page123</b> 또는 <b>123</b>) · 최대 10개</div>
  <div id="savedList" class="saved-list"></div>
  <div class="saved-actions"><button id="savedClear" class="saved-clear">모두 지우기</button></div>
</div>

<script>
(function(){
  const KEY = 'saved_pages_v1';        // localStorage key
  const MAX = 10;                      // 최대 개수
  const box = document.getElementById('savedBox');
  const inp = document.getElementById('savedInput');
  const btn = document.getElementById('savedAdd');
  const list = document.getElementById('savedList');
  const clearBtn = document.getElementById('savedClear');

  function load(){
    try{ return JSON.parse(localStorage.getItem(KEY) || '[]'); }
    catch(_){ return []; }
  }
  function save(arr){
    localStorage.setItem(KEY, JSON.stringify(arr));
  }
  function normalize(v){
    // 공백 제거
    v = String(v||'').trim();
    if (!v) return '';
    // 'page123' 허용
    const m1 = v.match(/^page(\d+)$/i);
    if (m1) return 'page' + m1[1];
    // 순수 숫자면 page 접두어 부여
    const m2 = v.match(/^\d+$/);
    if (m2) return 'page' + v;
    // 그 외는 불가
    return '';
  }
  function render(){
    const arr = load();
    list.innerHTML = '';
    if (!arr.length){
      const empty = document.createElement('div');
      empty.className = 'saved-tip';
      empty.textContent = '저장된 항목이 없습니다.';
      list.appendChild(empty);
      return;
    }
    arr.forEach((id, idx)=>{
      const row = document.createElement('div');
      row.className = 'saved-item';
      const txt = document.createElement('div');
      txt.className = 'txt';
      txt.textContent = id;           // 필요 시 링크로 바꾸려면 여기서 앵커 생성
      const del = document.createElement('button');
      del.className = 'saved-x';
      del.textContent = '✕';
      del.setAttribute('aria-label','삭제');
      del.addEventListener('click', ()=>{
        const cur = load();
        cur.splice(idx,1);
        save(cur);
        render();
      });
      row.appendChild(txt);
      row.appendChild(del);
      list.appendChild(row);
    });
  }
  function add(){
    const val = normalize(inp.value);
    if (!val){
      alert('page 번호만 입력하세요. 예: page123 또는 123');
      return;
    }
    let arr = load();
    // 중복이면 앞으로 당기기
    const existIdx = arr.indexOf(val);
    if (existIdx >= 0){
      arr.splice(existIdx,1); // 제거
      arr.unshift(val);       // 맨 앞에
      save(arr);
      render();
      inp.value = '';
      return;
    }
    // 새 항목인데 10개 초과면 거부
    if (arr.length >= MAX){
      alert('최대 10개까지만 입력 가능합니다. 몇 개를 지우거나 모두 지우고 추가하세요.');
      return;
    }
    arr.unshift(val);        // 맨 앞에 추가
    save(arr);
    render();
    inp.value = '';
  }

  btn.addEventListener('click', add);
  inp.addEventListener('keydown', (e)=>{ if(e.key==='Enter') add(); });
  clearBtn.addEventListener('click', ()=>{
    if (confirm('모든 저장 항목을 삭제할까요?')){ save([]); render(); }
  });

  render();
})();
</script>
